{% extends "layout/layout_write.html" %}
{% load static %}

{% block title %}MobileID{% endblock %}

{% block cdn %}
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
      integrity="sha512-1ycn6IcaQQ40/MKB4Imkb9UA9B+5I9F4buC9gLecuyJK6MYO1kVLcG7Rk9P0L0xF+5DNHPbTPEK5rZyb8kN+Iw=="
      crossorigin="anonymous" referrerpolicy="no-referrer" />

<style>
  body { background:#fff; }
  .card-hover:hover{
      transform:translateY(-4px);
      box-shadow:0 0.5rem 1rem rgba(0,0,0,.15);
      transition:.2s;
  }
</style>
{% endblock %}

{% block content %}
<div class="container mt-5 d-flex justify-content-center align-items-center" style="min-height:80vh;">
  <div class="card p-4 shadow-sm" style="max-width:500px;width:100%;">
    <h3 class="text-center mb-4 fw-semibold">My Mobile&nbsp;ID</h3>

    <!-- avatar -->
    <div class="text-center">
      <img src="data:image/png;base64,{{ user_profile_img|safe }}"
           class="rounded-circle shadow-sm"
           style="width:110px;height:110px;object-fit:cover;" alt="avatar">
      <h4 class="mt-3 mb-0">{{ name }}</h4>
      <p class="text-muted mb-3">{{ information_id }}</p>
    </div>

    <!-- main action -->
    <button id="show-info-button" class="btn btn-primary w-100 py-2 mb-3">
      PAY / Check-in
    </button>

    <!-- barcode area -->
    <div id="qrcode" class="text-center mb-4">
      <div id="qrcode-div" style="display:none;">Barcode</div>
      <div id="qrcode-code" style="display:none;">
        <div class="progress mx-auto" style="width:70%;">
          <div class="progress-bar" style="width:100%;" role="progressbar"
               aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
        </div>
      </div>
    </div>

    <!-- four-grid navigation -->
    <div class="container px-0">
      <div class="row g-3">

        <div class="col-6">
          <a href="{% url 'mobileid:web_edit_profile' %}" class="text-decoration-none">
            <div class="card border-0 text-center card-hover h-100">
              <div class="card-body d-flex flex-column justify-content-center align-items-center">
                <!-- FREE icon -->
                <i class="fa-solid fa-id-card fa-2x mb-2"></i>
                <span class="small fw-semibold">Edit&nbsp;Profile</span>
              </div>
            </div>
          </a>
        </div>

        <div class="col-6">
          <a href="{% url 'mobileid:web_manage_barcode' %}" class="text-decoration-none">
            <div class="card border-0 text-center card-hover h-100">
              <div class="card-body d-flex flex-column justify-content-center align-items-center">
                <i class="fa-solid fa-barcode fa-2x mb-2"></i>
                <span class="small fw-semibold">My&nbsp;Barcodes</span>
              </div>
            </div>
          </a>
        </div>

        <div class="col-6">
          <a href="{% url 'mobileid:web_barcode_settings' %}" class="text-decoration-none">
            <div class="card border-0 text-center card-hover h-100">
              <div class="card-body d-flex flex-column justify-content-center align-items-center">
                <!-- FREE gear icon -->
                <i class="fa-solid fa-gear fa-2x mb-2"></i>
                <span class="small fw-semibold">Settings</span>
              </div>
            </div>
          </a>
        </div>

        <div class="col-6">
          <a href="{% url 'mobileid:web_logout' %}" class="text-decoration-none">
            <div class="card border-0 text-center card-hover h-100">
              <div class="card-body d-flex flex-column justify-content-center align-items-center">
                <!-- sign-out alt is free in v5/v6 -->
                <i class="fa-solid fa-sign-out-alt fa-2x mb-2"></i>
                <span class="small fw-semibold">Log&nbsp;out</span>
              </div>
            </div>
          </a>
        </div>

      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block script %}
<script src="{% static 'assets/js/bcmath-min.js' %}"></script>
<script src="{% static 'assets/js/pdf417-min.js' %}"></script>
<script src="{% static 'assets/js/generate_barcode.js' %}"></script>
{% endblock %}